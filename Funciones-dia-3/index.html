<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Validador de Palíndromos</title>
  <style>
    :root{ --bg:#f6f8fa; --card:#fff; --accent:#4a90e2; --success:#27ae60; --danger:#e74c3c; }
    *{box-sizing:border-box}
    body{font-family:Segoe UI, Tahoma, Arial, sans-serif;background:var(--bg);margin:0;padding:24px;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .card{background:var(--card);border-radius:12px;padding:22px;max-width:740px;width:100%;box-shadow:0 8px 30px rgba(21,32,48,0.08)}
    h1{margin:0 0 12px;font-size:1.5rem;color:#223}
    p.lead{margin:0 0 18px;color:#445}

    .controls{display:flex;gap:8px;margin-bottom:14px}
    input[type="text"], textarea{width:100%;padding:12px;border-radius:8px;border:1px solid #dde4eb;font-size:1rem}
    textarea{min-height:96px;resize:vertical}
    button{padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    button.primary{background:var(--accent);color:#fff}
    button.ghost{background:transparent;border:2px solid #e1e7ee;color:#223}

    .result{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .badge{padding:8px 12px;border-radius:8px;font-weight:700}
    .badge.true{background:var(--success);color:#fff}
    .badge.false{background:var(--danger);color:#fff}

    .details{display:flex;gap:12px;flex-wrap:wrap}
    .panel{flex:1;min-width:220px;padding:12px;border-radius:8px;background:#fbfdff;border:1px solid #eef4fb}
    .panel h4{margin:0 0 8px;font-size:0.9rem;color:#324}
    .panel pre{white-space:pre-wrap;margin:0;font-family:inherit;color:#223;font-size:0.95rem}

    .examples{margin-top:14px}
    .example-btn{background:#f1f5fc;border:1px solid #dbe8ff;padding:8px 10px;border-radius:8px;margin-right:8px;cursor:pointer}

    .foot{margin-top:14px;color:#556;font-size:0.9rem}

    @media (max-width:600px){.details{flex-direction:column}}
  </style>
</head>
<body>
  <div class="card">
    <h1>Validador de Palíndromos</h1>
    <p class="lead">Escribe una palabra o frase y verifica si es un palíndromo. Esta página usa la función <code>esPalindromo</code> de <strong>palindromo.js</strong>.</p>

    <!-- Input area -->
    <div style="margin-bottom:10px">
      <textarea id="texto" placeholder="Ej: 'Anita lava la tina' o 'reconocer'" aria-label="Texto a validar"></textarea>
    </div>

    <div class="controls">
      <button id="btnCheck" class="primary">Verificar</button>
      <button id="btnClear" class="ghost">Limpiar</button>
      <button id="btnLive" class="ghost">Activar verificación en tiempo real</button>
    </div>

    <!-- Result -->
    <div class="result" id="resultArea" aria-live="polite">
      <div id="resultBadge" class="badge" style="display:none"></div>
      <div id="resultText" style="color:#334;font-weight:600"></div>
    </div>

    <!-- Details: texto limpio e invertido -->
    <div class="details">
      <div class="panel">
        <h4>Texto limpio (sin espacios, minúsculas)</h4>
        <pre id="cleanText">—</pre>
      </div>

      <div class="panel">
        <h4>Texto invertido</h4>
        <pre id="reversedText">—</pre>
      </div>
    </div>

    <!-- Examples -->
    <div class="examples">
      <h4>Ejemplos rápidos:</h4>
      <button class="example-btn" data-text="reconocer">reconocer</button>
      <button class="example-btn" data-text="Anita lava la tina">Anita lava la tina</button>
      <button class="example-btn" data-text="A mamá Roma le aviva el amor a mamá">A mamá Roma le aviva el amor a mamá</button>
      <button class="example-btn" data-text="oso">oso</button>
      <button class="example-btn" data-text="esto no es palindromo">No</button>
    </div>

    <p class="foot">Nota: <em>palindromo.js</em> actualmente elimina espacios y normaliza a minúsculas. No elimina signos de puntuación ni tildes; si deseas normalizar puntuación o caracteres Unicode, actualiza la función <code>esPalindromo</code>.</p>
  </div>

  <!-- Cargar la lógica del palíndromo -->
  <script src="palindromo.js"></script>

  <!-- Script que conecta la UI con palindromo.js -->
  <script>
    // Elementos del DOM
    const textoEl = document.getElementById('texto');
    const btnCheck = document.getElementById('btnCheck');
    const btnClear = document.getElementById('btnClear');
    const btnLive = document.getElementById('btnLive');
    const resultBadge = document.getElementById('resultBadge');
    const resultText = document.getElementById('resultText');
    const cleanTextEl = document.getElementById('cleanText');
    const reversedTextEl = document.getElementById('reversedText');
    const exampleBtns = document.querySelectorAll('.example-btn');

    let liveMode = false; // si true, verifica en cada pulsación

    // Función auxiliar para obtener versión "limpia" igual a la usada en palindromo.js
    // (la función esPalindromo en palindromo.js quita espacios y pasa a minúsculas)
    function getCleanText(input) {
      // Mismos pasos que en palindromo.js: toLowerCase + eliminar espacios
      if (typeof input !== 'string') return '';
      return input.toLowerCase().replace(/\s+/g, '');
    }

    // Función auxiliar para invertir texto limpio
    function getReversed(clean) {
      return clean.split('').reverse().join('');
    }

    // Mostrar resultado en UI
    function showResult(isPal, originalText) {
      if (isPal) {
        resultBadge.textContent = 'ES PALÍNDROMO';
        resultBadge.className = 'badge true';
        resultBadge.style.display = 'inline-block';
        resultText.textContent = `✅ "${originalText.trim()}" es un palíndromo.`;
      } else {
        resultBadge.textContent = 'NO ES';
        resultBadge.className = 'badge false';
        resultBadge.style.display = 'inline-block';
        resultText.textContent = `❌ "${originalText.trim()}" no es un palíndromo.`;
      }
    }

    // Acción principal: verificar palíndromo usando esPalindromo del archivo palindromo.js
    function verificar() {
      const value = textoEl.value || '';

      if (value.trim().length === 0) {
        // Mostrar estado vacío
        resultBadge.style.display = 'none';
        resultText.textContent = 'Escribe una palabra o frase para verificar.';
        cleanTextEl.textContent = '—';
        reversedTextEl.textContent = '—';
        return;
      }

      // Obtener texto limpio e invertido para mostrar
      const clean = getCleanText(value);
      const reversed = getReversed(clean);

      cleanTextEl.textContent = clean || '—';
      reversedTextEl.textContent = reversed || '—';

      // Llamada a la función del archivo palindromo.js
      // esPalindromo devuelve true/false
      const result = esPalindromo(value);

      showResult(result, value);
    }

    // Event listeners
    btnCheck.addEventListener('click', verificar);
    btnClear.addEventListener('click', () => {
      textoEl.value = '';
      verificar();
      textoEl.focus();
    });

    btnLive.addEventListener('click', () => {
      liveMode = !liveMode;
      btnLive.textContent = liveMode ? 'Desactivar verificación en tiempo real' : 'Activar verificación en tiempo real';
      // Si activamos y hay texto, ejecutar una verificación inmediata
      if (liveMode) verificar();
    });

    // Si el modo en tiempo real está activado, verificar en cada input
    textoEl.addEventListener('input', () => {
      if (liveMode) verificar();
    });

    // Cargar ejemplos
    exampleBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const txt = btn.getAttribute('data-text') || '';
        textoEl.value = txt;
        verificar();
      });
    });

    // Inicializar UI
    verificar();

    // Mensaje en consola para desarrolladores
    console.log('Validador de palíndromos listo.');
  </script>
</body>
</html>
